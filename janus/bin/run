#!/usr/bin/python3

from pathlib import Path
import docker
import os

IMAGE_TAG = 'atyenoria/janus-webrtc-gateway-docker'
CONTAINER_NAME = 'janus'

script_full_path = os.path.realpath(__file__)
local_conf_dir = Path(script_full_path).parent.parent.joinpath(Path('conf'))
janus_conf_dir = '/usr/local/etc/janus/'

client = docker.from_env()
client.containers.run(
    IMAGE_TAG,
    name=CONTAINER_NAME,
    auto_remove=True,
    detach=True,
    network='host',
    volumes={
        local_conf_dir: {
            'bind': janus_conf_dir,
            'mode': 'rw',
        }
    }
)
